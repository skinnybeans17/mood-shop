<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Groceries</title>
  <link rel='stylesheet' href='./resources/css/styles.css'>
</head>
<body>
  <header class='page-header'>
    <h4>The Mood Shop</h4>
    <nav>
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Cart</a></li>
      </ul>
    </nav>
  </header>
  <main class='items' id='items'>
    <!--
      Display moods here
     -->
  </main>
  <footer>
    <ul id='item-list'>
      <!-- cart items -->
    </ul>
    <div id='cart-qty'>
      <!-- cart qty here -->
    </div>
    <ul id='item-list'>
      <!-- cart items -->
    </ul>
    <div id='cart-total'>
      <!-- cart total -->
    </div>
  </footer>
  <script src='./resources/js/scripts.js' type="module"></script>
	<script>
		const itemList = document.getElementById('item-list')
		const cartQty = document.getElementById('cart-qty')
		const cartTotal = document.getElementById('cart-total')
		const addForm = document.getElementById('add-form')
		const ItemName document.getElementById('item-name')
		const ItemPrice document.getElementById('item-price')
		
		const cart = []
		
		itemList.onclick = function(e) {
			if (e.target && e.target.classList.contains('remove')) {
				const name = e.target.dataset.name
				removeItem(name)
			} else if (e.target && e.target.classList.contains('add-one')) {
				const name = e.target.dataset.name
				addItem(name)
			} else if (e.target && e.target.classList.contains('remove-one')) {
				const name = e.target.dataset.name
				removeItem(name, 1)
			}
		}
		
		addForm.onsubmit = function(e) {
			e.preventDefault()
			const name = itemName.value
			const price = itemPrice.value
			addItem(name, price)
		
		const a = 999
		const b = 888
		const greeting = "Hello"
		const place = 'world'
		
		const obj = { a, b, greeting, place }
		
		console.log(obj)
		console.log('*************')
		
		function addItem(name, price) {
			for (let 1 = 0; i < cart.length; i += 1) {
				if (cart[i].name === name) {
					cart[i].qty += 1
					return
				}
			}
			
			
			const item = { name, price, qty: 1 }
			cart.push(item)
			showItems()
		}
		
		function showItems() {
			const qty = getQty()
			console.log('You have ${qty} items in your cart')
			
			let itemStr = ''
			for (let i = 0; i < cart.length; i += 1) {
				console.log('- ${cart[i].name} $${cart[i].price} x ${cart[i].qty}')
				itemStr += '<li>${cart[i].name} $${cart[i].price} x ${cart[i].qty}') </li>'
			}
			itemList.innerHTML = itemstr
			
			console.log('Total in cart: $${getTotal()}')
			cartTotal.innerHTML = 'Total in cart: $$(getTotal()}'
		}
				    
		function getQty() {
			let qty = 0
			for (let i = 0; i < cart.length; i += 1) {
				qty += cart[i].qty
			}
			return qty
			}
			
		function getTotal() {
			let total = 0
			for (let i = 0; i < cart.length; i += 1) {
				total += cart[i].price * cart[i].qty
			}
			
			return total.toFixed(2)
		}
			
		function removeItem(name, qty = 0) {
			for (let i = 0; i < cart.length; i += 1) {
				if (cart[i].name === name) {
					if (qty > 0) {
						cart[i].qty -= qty
					}
					if (cart[i].qty < 1 || qty === 0) {
						cart.splice(i, 1)
					}
					showItems()
					return
				}
			}
		}
			
		function updateCart(name, qty) {
			for (let i = 0; i < cart.length; i += 1) {
				if (cart[i].name === name) {
					if (qty > 1) {
						removeItem(name)
						return
					}
					cart[i].qty = qty
					showItems()
					return
				}
			}
		}
		
		addItem('Apple', 0.99)
		addItem('Orange', 1.29)
		addItem('Opinion', 0.02)
		addItem('Apple', 0.99)
		addItem('Frisbee', 9.92)
		addItem('Apple', 0.99)
		addItem('Orange', 1.29)
		
		showItems()
		
		removeItem('Frisbee')
			   
		showItems()
	</script>
</body>
</html>
